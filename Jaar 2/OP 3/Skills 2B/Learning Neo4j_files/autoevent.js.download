function wrapErrors(a){if(a.__wrapped__){return a.__wrapped__;}a.__wrapped__=function(){try{return a.apply(this,arguments);}catch(b){logError(b);}};return a.__wrapped__;}logError=function(a){var b=function(h){var g="";for(var f in h){if(h.hasOwnProperty(f)&&!(typeof h[f]==="function")&&!(typeof h[f]==="object")){g+=f+": "+h[f]+"\r\n";}}return g;};var c="";if(window.ep){if(window.ep.clientData&&!window.ep.clientData.is_error_logging_enabled){return;}c+="ep:\r\n ";c+=b(window.ep);if(window.ep.clientData){c+="\r\nep.clientdata:\r\n";c+=b(window.ep.clientData);}}var d=new window.URLSearchParams(window.location.search).get("sid");$.post(ep.utilities.buildAjaxRequestPath("ReportError/Report")+"?sid="+d,{source:"amplitude",error:a.message+"\r\nstack: "+a.stack+"\r\n"+c});};window.onerror=function(c,f,d,a,b){logError(b);};try{(function(h,z){var m=h.amplitude||{_q:[],_iq:{}};var x=z.createElement("script");x.type="text/javascript";x.async=true;x.src="https://cdn.amplitude.com/libs/amplitude-4.4.0-min.gz.js";x.onload=function(){if(h.amplitude.runQueuedFunctions){h.amplitude.runQueuedFunctions();}else{console.log("[Amplitude] Error: could not load SDK");}};var j=z.getElementsByTagName("script")[0];j.parentNode.insertBefore(x,j);function y(a,c){a.prototype[c]=function(){this._q.push([c].concat(Array.prototype.slice.call(arguments,0)));return this;};}var q=function(){this._q=[];return this;};var b=["add","append","clearAll","prepend","set","setOnce","unset"];for(var A=0;A<b.length;A++){y(q,b[A]);}m.Identify=q;var f=function(){this._q=[];return this;};var k=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(var w=0;w<k.length;w++){y(f,k[w]);}m.Revenue=f;var g=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function B(a){function d(l){a[l]=function(){a._q.push([l].concat(Array.prototype.slice.call(arguments,0)));};}for(var c=0;c<g.length;c++){d(g[c]);}}B(m);m.getInstance=function(a){a=(!a||a.length===0?"$default_instance":a).toLowerCase();if(!m._iq.hasOwnProperty(a)){m._iq[a]={_q:[]};B(m._iq[a]);}return m._iq[a];};h.amplitude=m;})(window,document);amplitude.getInstance().init(ep.amplitudeAPIKey,null,{includeReferrer:true});if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;}if(!Element.prototype.closest){Element.prototype.closest=function(b){var a=this;if(!document.documentElement.contains(a)){return null;}do{if(a.matches(b)){return a;}a=a.parentElement||a.parentNode;}while(a!==null&&a.nodeType===1);return null;};}var cachedQuerySelector=new (function(){return function(a){if(!a){return undefined;}return this[a]===undefined?this[a]=document.querySelector(a):this[a];}.bind(this);})();var an=(function(){try{eventTypes={ACTION:"action",PAGEVIEW:"pageview",TIMER:"timer"};var o={SEARCH:"search",AUTOCOMPLETE:"autocomplete",SHOWING_RESUTS:"showing results for",SEARCH_INSTEAD:"search instead for",DID_YOU_MEAN:"did you mean",ALL_ISSUES:"All Issues"};var q=localStorage.getItem("withLogging")==="true";var n=null;var d=false;var j={RESEARCH_STARTER:"research_starter",EXACT_MATCH:"exact_match"};setLogging=function(r){q=r;};clickIsInteresting=function(r){if(r.onclick||r.parentElement.tagName.toUpperCase()==="A"||(!!$&&$(r).data("events")&&$(r).data("events").length>0)||(r.classList&&r.classList.contains("icon"))){return true;}return false;};keyPressIsInteresting=function(t){if(t.keyCode===9){return false;}var u=t.keyCode;var y=t.shiftKey;var s=t.ctrlKey;var r=t.altKey;var w=t.metaKey;var x=t.keyCode===91;var v=t.code==="NumpadEnter";switch(u){case 13:if((w&&r&&y)||(y&&w)||(y&&s)||(y&&x)||(w&&r)||y||s||w||v){return{interesting:true,is_context_menu_open:true};}break;default:return false;}};var p=false;var g=false;elementClicked=function(u,r){if(p){return;}var w=u.target.tagName;if(r){r.is_context_menu_open=u.type==="contextmenu";}switch(w.toUpperCase()){case"A":if(u.target.closest("span[data-auto=publication_details_text]")){createSearchInitiatedEvent(o.SEARCH,getElementSearchTerm(u.target));break;}if(u.target.closest("#citationFields")){var t=u.target.closest("dd").previousSibling.textContent.slice(0,-1);createSearchInitiatedEvent(t,getSearchTermFromLink(u));}else{if(u.target.closest(".placard-container")){createPlacardClickedEvent(u);}else{if(u.target.closest(".panel")){createVideoClickedEvent(u,r);}else{if(u.target.closest(".result-list-li")||(u.target.closest(".ep-dialog")&&n)){createResultClickedEvent(u,r);}else{if(u.target.closest(".authVolIssue_issue_cell")){var v=u.target.attributes["data-search"];createSearchInitiatedEvent(o.ALL_ISSUES,v?v.value:"");}else{if(u.target.closest(".search-terms")){createSearchInitiatedEvent(o.SEARCH,u.target.text);}else{if(u.target.id&&u.target.id==="btnSuggestTerm"){var s=getAffordance(u.target.getAttribute("data-formsubmit"));createSearchInitiatedEvent(s,u.target.text);}else{if(u.target.classList.contains("auto-complete-truncate")){processAutoComplete(u.target);}else{if(u.target.closest("body.detail, body.pdfviewer")){createDetailsClickedEvent(u,u.target.closest("body.detail, body.pdfviewer"));createResearchStarterClickedEvent(u,r);}else{if(u.target.closest(".toolbar-navigation, ul[role=menubar]")){createNavigationTabClickedEvent(u);}else{if(u.target.closest(".auth-record-link-container")){createPublicationItemClickedEvent(u);}else{if(u.target.closest("#featureAreasControl")){createFeatureClickedEvent(u,false);}else{if(!u.target.classList){n=null;createClickEvent(u);}}}}}}}}}}}}}break;case"BUTTON":if(u.target.closest(".panel")){createVideoClickedEvent(u,r);}else{createClickEvent(u);}break;case"STRONG":if(u.target.closest("#citationFields")){var t=u.target.closest("dd").previousSibling.textContent.slice(0,-1);createSearchInitiatedEvent(t,getSearchTermFromLink(u));}else{if(u.target.closest(".auto-complete-truncate")){processAutoComplete(u.target.closest(".auto-complete-truncate"));}else{if(u.target.closest(".placard-container")&&u.target.parentElement.tagName.toUpperCase()==="A"){createPlacardClickedEvent(u);}else{if(u.target.closest(".result-list-li")&&u.target.parentElement.tagName.toUpperCase()==="A"){createResultClickedEvent(u,r);}else{if(clickIsInteresting(u.target)){createClickEvent(u);}}}}}break;case"UL":case"DIV":case"I":if(clickIsInteresting(u.target)){createClickEvent(u);}break;case"SPAN":if(u.target.closest("body.detail")&&clickIsInteresting(u.target)){createDetailsClickedEvent(u,u.target.closest("body.detail"));createResearchStarterClickedEvent(u,r);}if(clickIsInteresting(u.target)){createClickEvent(u);}break;case"IMG":switch(true){case !!u.target.closest(".placard-container"):createPlacardClickedEvent(u);case !!u.target.closest(".carousel-container"):createFeatureClickedEvent(u,true);}switch(true){case !!u.target.closest(".panel"):createVideoClickedEvent(u,r);break;case !!u.target.closest("body.detail, body.pdfviewer"):createDetailsClickedEvent(u,u.target.closest("body.detail, body.pdfviewer"));createResearchStarterClickedEvent(u);break;default:createImgEvent(u);break;}break;case"INPUT":if(u.target.type&&u.target.type.toLowerCase()==="image"){createImgEvent(u);break;}if(u.target.type&&u.target.type.toLowerCase()==="button"){createClickEvent(u);break;}if(u.target.id==="SearchButton"||(u.target.type&&u.target.type.toLowerCase()==="submit"&&u.target.closest(".btnset-footer"))){createSearchInitiatedEvent(o.SEARCH);break;}if(u.target.id==="alertDialogSaveBtn"){createSaveAlertClickedEvent(u);break;}if(u.target.id.toLowerCase().includes("searchterm")||u.target.id.toLowerCase().includes("searchbox")){break;}if(u.target.closest("body.detail")){createDetailsClickedEvent(u,u.target.closest("body.detail"));createResearchStarterClickedEvent(u,r);}break;case"SVG":if(u.target.closest(".panel__thumbnail-modal-close-btn")){createVideoClickedEvent(u,r);}break;case"PATH":if(u.target.closest(".panel__thumbnail-modal-close-btn")){createVideoClickedEvent(u,r);}break;case"P":if(u.target.closest("a.rif_link > p")){createResearchStarterClickedEvent(u);}break;}};processAutoComplete=function(r){if(document.getElementsByClassName("find-field-inputs-row").length){createSearchInitiatedEvent(o.AUTOCOMPLETE,r.text);}else{g=true;}};contextmenuOpened=function(s,r){d=false;createContextmenuEvent(s,r);};elementChanged=function(r){var s=r.target.tagName;switch(s.toUpperCase()){case"SELECT":createMultiSelectEvent(r);break;case"INPUT":switch(r.target.type.toLowerCase()){case"radio":createRadioEvent(r);break;case"checkbox":createCheckEvent(r);break;case"text":createTextEvent(r);break;}break;case"OPTION":if(r.target.parentElement.multiple){createMultiSelectEvent(r);}else{createSelectEvent(r);}break;}};var l;var a;var m;var k;keyPressed=function(r){d=false;var u=r.target.tagName;var s=keyPressIsInteresting(r);var t=r.keyCode;l=a;a=document.getElementById("ui-active-menuitem");m=k;k=r.keyCode;if(t===13){switch(u.toUpperCase()){case"INPUT":if(l&&(m===38||m===40)){createSearchInitiatedEvent(o.AUTOCOMPLETE);}else{if(r.target.id==="SearchButton"||(r.target.type&&(r.target.type.toLowerCase()==="text"||(r.target.type.toLowerCase()==="submit"&&r.target.closest(".btnset-footer"))))){createSearchInitiatedEvent(o.SEARCH);}}break;}}else{if(s){switch(u.toUpperCase()){case"A":createKeyPressedEvent(r,s);break;case"STRONG":createKeyPressedEvent(r,s);break;}}}};elementMouseOver=function(r){var s=r.target.classList&&r.target.classList.contains("preview-hover");var t=r.target.closest(".result-list-li");if(s&&t){n=t;}};submitted=function(r){createSubmitEvent(r);};windowLoaded=function(r){createAutocorrectAppliedOrDidYouMeanEvent(r);createResultsFetchedEvent(r);b(r);createDetailsShownEvent(r);createResearchStartesShownEvent(r);createPlacardShownEvent(r);createFeatureShownEvent(r);};isOnPublicationsPage=function(){return window.location.href.indexOf("/command/detail?")>0;};isOnResultsPage=function(){return window.location.href.indexOf("/results?")>0||window.location.href.indexOf("/resultsadvanced?")>0||window.location.href.indexOf("/refresults?")>0;};function h(){return window.location.href.indexOf("/search/basic?")!==-1;}isOnFirstResultsPage=function(){if(isOnResultsPage()){var s=$(".page-title").contents().filter(function(){return this.nodeType==Node.TEXT_NODE;}).text().trim();var r=s.split("-");if(r.length<2){return false;}var t=parseInt(r[0]);if(isNaN(t)){return false;}return t==1;}return false;};createAutocorrectAppliedOrDidYouMeanEvent=function(t){var r=document.querySelector("#lblCorrectTerm");if(!r){return;}var w={};var s={};var u="";var v=document.querySelector("#lblOriginalTerm");if(!v){u="Did You Mean - Shown";s.suggested_term=r.nextElementSibling.innerText;s.original_term=getSearchTerms();}else{u="Autocorrect - applied";s.autocorrect_term=r.nextElementSibling.innerText;s.original_term=v.nextElementSibling.innerText;}s.event_type=u;w.action=u;this.logEvent(w,s);};createResultsFetchedEvent=function(w){if(!isOnResultsPage()){return null;}var A={};A.action="results_fetched";A.container="Results Section";var v={};v.event_type="results_fetched";var D=0;var r=document.querySelectorAll('div[class="resultList"] > div[class="content-header"] > h1[class*="page-title"]');if(r.length>0){var x=r[0].innerText.split(" of ");if(x.length===2){D=x[1].replace(/,/g,"").trim();}}v.total_hits=D;var s=[];var y=document.querySelectorAll('div[id="relatedInfoControl"] > div[class*="related-info-container"] div[class*="related-info-area"]');if(y.length>0){[].forEach.call(y,function(F){var E=F.querySelectorAll("span");if(E.length>0){s.push(E[0].innerText);}});}v.content_verticals_displayed=s;var C=[];var B=document.querySelectorAll('div[id="multiSelectCluster_SubjectMajorContent"] > ul li');if(B.length<1){B=document.querySelectorAll('div[id="multiSelectCluster_SubjectEDSMajorContent"] > ul li');}if(B.length<1){B=document.querySelectorAll('div[id="multiSelectCluster_SubjectContent"] > ul li');}if(B.length<1){B=document.querySelectorAll('div[id="multiSelectCluster_SubjectEDSContent"] > ul li');}if(B.length>0){[].forEach.call(B,function(F){var E=F.querySelectorAll("label");if(E.length>0){C.push(E[0].innerText.replace(/'\n\t\'/g,"").trim());}});}v.subjects=C;var t=0;var z=document.querySelectorAll('div[role="main"] > ul[class*="result-list"] li[class^="result-list-li"]');if(z.length>0){[].forEach.call(z,function(E){var F=getResultItemPropertiesData(E.querySelector(".result-list-record"));if(F.formats.length>0){t++;}});}v.count_of_full_text_results_shown=t;var u=0;if(z.length>0){u=z.length;}v.count_of_results_shown=u;v.search_term=getSearchTerms();v.filters_applied=getFilters();v.search_mode=f();v.database=ep.clientData.db;this.logEvent(A,v);return null;};getArticleToolClicked=function(r){var s=r.target;if(s.closest(".article-tools .article-tool")){return s.title.toLowerCase();}else{if(s.id==="translateBtn"){return s.title.toLowerCase();}else{if(s.classList.contains("rsbtn_pause")||s.classList.contains("rsbtn_stop")){return"listen";}else{return"";}}}};createDetailsClickedEvent=function(u,v){var t=this.getCookie("data-placard-type");if(cachedQuerySelector("[data-result-key='Placard']")&&t===j.RESEARCH_STARTER){return null;}var r=document.querySelector("a[name=citation]");if(!r){r=v;}var w={action:"detail_record_clicked",container:"Details section"};var s=getResultItemPropertiesData(r);s.event_type="detail_record_clicked";s.article_tool_clicked=getArticleToolClicked(u);s.table_of_contents_clicked=String(!!u.target.closest(".html-ft-toc"));s.audio_clicked=String(!!u.target.closest("span[id^=audio_] .link.audio-sample"));s.affordance_clicked=getAffordanceUsed(r);if(!s.affordance_clicked||!s.affordance_clicked.name){s.affordance_clicked=getAffordanceUsed(u.target);}s.image_clicked=String(!!(u.target.closest("a.icon-image-link")||u.target.closest("img.imgview-thumb")));s.detail_record_page_type=isOnPublicationsPage()?"Publication":"Content Item";this.logEvent(w,s);};createResearchStarterClickedEvent=function(u){var t=this.getCookie("data-placard-type");if(!cachedQuerySelector("[data-result-key='Placard']")||t!=j.RESEARCH_STARTER){return null;}var v="research_starter_clicked";var r=u.target.closest(".record-type, .ils-link");var w={action:v,container:"Details section"};var s={event_type:v,article_tool_clicked:getArticleToolClicked(u),affordance_clicked:getAffordanceUsed(r),audio_clicked:String(!!u.target.closest("#readspeaker_button")),table_of_contents_clicked:"false",image_clicked:"false",related_information_clicked:"false"};u.target.matches("img.rs_skip")?(s.image_clicked="true"):(s.image_clicked="false");u.target.matches('a[data-auto*="ep_link"]')?(s.table_of_contents_clicked="true"):(s.table_of_contents_clicked="false");u.target.parentElement.matches("a.rif_link")?(s.related_information_clicked="true"):(s.related_information_clicked="false");this.logEvent(w,s);};createResultClickedEvent=function(u,r){if(!isOnResultsPage()||d){return null;}var w={};w.action="result_clicked";w.container="Results Section";var x=u.target.closest(".result-list-li")||n;var t={event_type:"result_clicked",affordance_clicked:getAffordanceUsed(u.target)};var y=getResultItemPropertiesData(x.querySelector(".result-list-record"));var z=setResultItemProperties(y);for(var v in z){t[v]=z[v];}var s;if(r&&r.hasOwnProperty("is_context_menu_open")){s=r.is_context_menu_open.toString();}t.is_context_menu_open=s||"false";this.logEvent(w,t);d=false;return null;};createNavigationTabClickedEvent=function(t){if(d||!t.target.id||t.target.id===""){return null;}var u={};u.action="clicked";u.container="Navigation Tab";var r=t.target.id;if(!r||r===""){r=t.target.text.trim();}var s={event_type:"clicked",affordance_clicked:r};this.logEvent(u,s);d=false;return null;};createPublicationItemClickedEvent=function(s){var t={};t.action="clicked";t.container="Publication Item";var r={event_type:"clicked",publication_title:s.target.title};this.logEvent(t,r);return null;};createSaveAlertClickedEvent=function(s){var u={};u.action="clicked";u.container="Save Alert";var r={event_type:"clicked",};var t=s.target.attributes["data-name"];if(t){r.publication_title=t.value;}this.logEvent(u,r);return null;};isImageShown=function(){var r=document.getElementById("PlacardImage1_ers");return(r!=null&&r.height&&r.width);};createPlacardShownEvent=function(s){if(window.location.href.indexOf("/results?")<0&&window.location.href.indexOf("/resultsadvanced?")<0&&!!document.querySelector(".placard-container")){return null;}var r=10000;var t=200;var u=setInterval(function(){if(!document.querySelector(".loading.placard-container")&&!!document.querySelector(".placard")){var x=document.querySelector(".placard");if(x.getAttribute("data-placard-type")===j.RESEARCH_STARTER){var w=document.querySelector(".placard-container");var B={action:"research_starter_shown",container:"Results section"};var v={event_type:"research_starter_shown"};var y=getPlacardItemPropertiesData(w);var z=setPlacardItemProperties(y);for(var A in z){if(A!=="image_shown"){v[A]=z[A];}}v.affordances_shown=getAffordancesShown(w);this.logEvent(B,v);}clearInterval(u);}},t);setTimeout(wrapErrors(function(){clearInterval(u);}),r);};createPlacardClickedEvent=function(s){var x=document.querySelector(".placard").getAttribute("data-placard-type");this.setCookie("data-placard-type",x);var u=document.querySelector(".placard");if(u!=null&&u.getAttribute("data-placard-type")===j.RESEARCH_STARTER){var t=document.querySelector(".placard-container");var z={action:"research_starter_clicked",container:"Results section"};var r={event_type:"research_starter_clicked"};r.affordance_clicked=getAffordanceUsed(s.target);r.affordances_shown=getAffordancesShown(t);var v=getPlacardItemPropertiesData(t);var w=setPlacardItemProperties(v);for(var y in w){r[y]=w[y];}this.logEvent(z,r);}d=false;return null;};getPlacardItemPropertiesData=function(t){var r={};var s=t.getAttribute("data-placard");if(s){s=JSON.parse(s);r={document_type:s.DocumentType,formats:s.Formats,pub_year:s.PubYear,record_an:s.RecordAN,search_term:s.Term,source:s.Source,subjects:s.Subjects,title:s.Title};}r.image_shown=String(!!isImageShown());return r;};setPlacardItemProperties=function(r){if(r){var s="null";return{document_type:r.document_type||s,image_shown:r.image_shown||s,pub_year:parseInt(r.pub_year,10)||s,record_an:r.record_an||s,search_term:r.search_term||s,source:r.source||s,subjects:r.subjects.length>0?r.subjects:s,title:r.title||s};}};createDetailsShownEvent=function(){if(window.location.href.indexOf("/detail?")<0&&window.location.href.indexOf("/pdfviewer?")<0){return null;}var s=this.getCookie("data-placard-type");if(cachedQuerySelector("[data-result-key='Placard']")&&s===j.RESEARCH_STARTER){return null;}var t="detail_record_shown";var u={action:t,container:"Details section"};var r=getResultItemPropertiesData(document.querySelector("a[name=citation]"));r.article_tools_shown=getArticleTools();r.table_of_contents_shown=String(!!document.querySelectorAll(".html-ft-toc").length);r.audio_shown=String(!!document.querySelectorAll("span[id^=audio_] .link.audio-sample").length);r.affordances_shown=[].map.call(document.querySelectorAll(".record-type, .ils-link"),function(v){return v.textContent;});r.event_type=t;r.image_shown=String(!!document.querySelectorAll("img.imgview-thumb").length);r.detail_record_page_type=isOnPublicationsPage()?"Publication":"Content Item";this.logEvent(u,r);return null;};createResearchStartesShownEvent=function(){if(window.location.href.indexOf("/detail?")<0&&window.location.href.indexOf("/pdfviewer?")<0){return null;}var s=this.getCookie("data-placard-type");if(!cachedQuerySelector("[data-result-key='Placard']")||s!=j.RESEARCH_STARTER){return null;}var t="research_starter_shown";var u={action:t,container:"Details section"};var r={article_tools_shown:getArticleTools(),table_of_contents_shown:String(!!document.querySelectorAll(".html-ft-toc").length),audio_shown:String(!!document.querySelector("#readspeaker_button")),affordances_shown:[].map.call(document.querySelectorAll(".record-type, .ils-link"),function(v){return v.textContent;}),event_type:t,image_shown:String(!!document.querySelector("img.rs_skip")),related_information_shown:String(!!document.querySelector(".rif_container"))};this.logEvent(u,r);return null;};var b=function(){if(!isOnFirstResultsPage()){return null;}var w={};w.action="results_shown";w.container="Results Section";var r={};r.event_type="results_shown";var x=document.querySelectorAll(".result-list-li");if(!x.length){r.error="Result list not found";this.logEvent(w,r);throw"Result list not found";}var t=0;while(t<x.length){var u=getResultItemPropertiesData(x[t].querySelector(".result-list-record"));var v=setResultItemProperties(u);for(var s in v){r[s]=v[s];}r.affordances_shown=getAffordancesShown(x[t])||null;this.logEvent(w,r);t++;}return null;};function f(){var s=document.querySelectorAll("#searchModeList input");var r=[].filter.call(s,function(v){return v.checked;});if(r.length>0){return r[0].value;}var t=document.querySelector(".bb-heading");if(t){var u=t.getAttribute("search-mode");return u;}return null;}createSearchInitiatedEvent=function(r,u){p=true;var t={container:"Search",action:"initiated"};var s={};s.event_type=eventTypes.ACTION;s.search_term=u?u:getSearchTerms();s.affordance=r;s.is_autocomplete=(r===o.AUTOCOMPLETE?"true":g).toString().toLowerCase();s.filters_applied=getFilters();s.search_mode=f();s.database=ep.clientData.db;this.logEvent(t,s);p=false;g=false;};getArticleTools=function(){var t=[];var w=document.querySelectorAll(".article-tools .article-tool a");for(var r=0;r<w.length;r++){var v=w.item(r).title.toLowerCase();t.push(v);}var s={"#textToSpeechPlaceholder":"listen","#translateBtn":"translate"};for(var u in s){if(document.querySelector(u)){t.push(s[u]);}}return t;};getSearchTerms=function(){var s;var r=document.getElementsByClassName("find-field-inputs-row");if(r.length){s=getBasicSearchTerm();}else{s=getAdvancedSearchTerm();}return s;};getBasicSearchTerm=function(){var u=document.getElementById("mb1");var t=document.getElementById("SearchTerm1");var s="";var r={Title:"TI",Author:"AU",Keyword:""};if(u&&u.title){s=r[u.title];}return[s,t?t.value:""].join(" ").trim();};getAdvancedSearchTerm=function(){var y=[];var x=document.querySelectorAll("#guidedfindfieldRows > .field-row");if(!x.length){return"";}for(var u=1;u<=x.length;u++){var v=document.getElementById("Searchbox"+u).value;if(!v){continue;}var t=".field-row:nth-child("+u+") .dd-active";var s=document.querySelectorAll(t);var r;var w;if(u===1){r=getAbbreviatedSearchFieldOption(s[0].title);}else{w=s[0].title;r=getAbbreviatedSearchFieldOption(s[1].title);}y.push(w,r,v);}return y.filter(function(z){return z;}).join(" ");};getElementSearchTerm=function(r){if(r.attributes["data-search"]){return decodeURIComponent(r.attributes["data-search"].value.replace(/\+/g," "));}return r.text;};getAbbreviatedSearchFieldOption=function(r){var s=r.slice(0,2);if(s===s.toUpperCase()){return s;}return null;};getAffordance=function(r){switch(true){case (r.indexOf("DidYouMean")!==-1):return o.DID_YOU_MEAN;break;case (r.indexOf("ShowResultsfor")!==-1):return o.SHOWING_RESUTS;break;case (r.indexOf("InsteadFor")!==-1):return o.SEARCH_INSTEAD;break;default:return o.SEARCH;break;}};getAffordanceUsed=function(s){var r={};if(!s){return r;}if(s.href){r.name=getAffordanceLabel(s);r.link=isJavaScriptInHref(s.href)?null:s.href;}else{if(s.parentElement.href&&s.parentElement.tagName.toUpperCase()==="A"&&s.tagName.toUpperCase()==="STRONG"){r.name=getAffordanceLabel(s.parentElement);r.link=isJavaScriptInHref(s.parentElement.href)?null:s.parentElement.href;}}if(r.link){r.link=r.link.replace(/~/g,"%7E");}return r;};isJavaScriptInHref=function(r){return !!(r||"").match(/^javascript:/gi);};getAffordanceLabel=function(r){var s="";var t={"htmlft-link":"Lexile Score","hover-add-folder":"Hover - Remove from folder","hover-remove-folder":"Hover - Add to folder",HyperLinkSearchResult:"Database","icon-image-link":"Quick View Image","preview-hover":"Preview Icon",rtac:"rtac","icon-image-link":"Quickview Image Show/Hide Toggle","title-link":"Title Link","more-link":"More",authVolIssue_issue_cell:"All Issues"};if(s===""&&r.classList.length){for(var u in t){if(r.classList.contains(u)){s=t[u];break;}}}if(s===""&&r.id.indexOf("-download-link")>-1){s="Download Link";}else{if((s===""&&r.className.indexOf("worldcat")>-1)||r.parentElement.className.indexOf("worldcat")>-1){s="Link to Catalog Record";}else{if(s===""&&r.id.match("PlacardTitle")){s="Other Topics";}else{if((s===""&&r.className.indexOf("title-link")>-1)||r.parentElement.className.indexOf("placard-image")>-1){s="Image";}else{if(s===""&&r.attributes["data-title"]){s=r.attributes["data-title"].textContent;}else{if(s===""&&r.className.indexOf("image")!==-1&&r.parentElement.className.indexOf("jcarousel-item")!==-1){s=r.attributes.title.textContent;}else{if(s===""){s=r.innerText;}}}}}}}return s||null;};getSearchTermFromLink=function(s){var t=s.target.href||s.target.closest("a").href;var r=decodeURIComponent(t);var v=/~~(.+)sl/;var u=v.exec(r)[1];if(u&&u.slice(-2)==="||"){u=u.slice(0,-2);}return u||s.target.text;};isResultItemInFolder=function(s){var t=false;var r=s.querySelector(".item-not-in-folder");if(r.hasAttributes()&&r.getAttribute("style")){t=r.attributes.style.value.toLowerCase()==="display: none;";}return t;};getAffordancesShown=function(v){var s=[];var r=[].slice.call(v.querySelectorAll("a[href], .preview-hover, #hover-folder, .worldcat, .rtac"));var t=(function(){for(var w=0;w<r.length;w++){if(r[w].classList.length){for(var x=0;x<r[w].classList.length;x++){if(r[w].classList[x].toLowerCase()==="item-not-in-folder"){return w;}}}}})();if(t){isResultItemInFolder(v)?r.splice(t+0,1):r.splice(t+1,1);}if(r.length){for(var u=0;u<r.length;u++){s.push(getAffordanceLabel.call(v,r[u]));}}return s.filter(affordancesShownWithoutDuplicates);};createFeatureClickedEvent=function(s,t){var u=["lrc","pov"];if(!h()||u.indexOf(ep.interfaceId)<0){return null;}if(s.target.id==="linkShowAll"){return null;}var v={action:"feature_clicked",container:"Feature Area"};var r={};r.event_type=v.action;r.feature_area_title=s.target.closest("div.module").querySelector("h2.module-heading").innerText;r.database=ep.clientData.db;r.image_clicked=t;r.affordance_clicked=s.target.tagName==="IMG"?getAffordanceUsed(s.target.parentElement):getAffordanceUsed(s.target);this.logEvent(v,r);};createFeatureShownEvent=function(s){var w=["lrc","pov"];if(!h()||w.indexOf(ep.interfaceId)<0){return null;}var v=document.querySelectorAll("div.module");var t="feature_shown";var x={action:t,container:"Feature Area"};if(!v.length){r.error="Feature list not found";this.logEvent(x,r);throw"Feature list not found";}for(var u=0;u<v.length;u++){var r={feature_area_title:v[u].querySelector("h2.module-heading").innerText,feature_area_subtitle:v[u].querySelector(".module-title")?v[u].querySelector(".module-title").innerText:"null",audio_shown:String(!!document.querySelectorAll("span[id^=audio_] .link.audio-sample").length),table_of_contents_shown:String(!!document.querySelectorAll(".html-ft-toc").length),affordances_shown:getAffordancesShown(v[u])||null,image_shown:String(!!v[u].querySelector("img")),event_type:t};this.logEvent(x,r);}return null;};affordancesShownWithoutDuplicates=function(s,t,r){return r.indexOf(s)===t;};getPageIndex=function(s){var r=0;if(s.length>0){[].forEach.call(s,function(t){if(t.children.length===0){r=t.innerText;}});return parseInt(r,10);}};getRowIndex=function(s){if(s&&s.parentElement){var t=s.parentElement.children;var u=[];if(t.length>0){[].forEach.call(t,function(v){if(v.children.length>0){u.push(v.children[0].id);}if(v.className==="apvideo"){u.push(v.className);}});}}var r;if(s&&s.children.length>0){[].forEach.call(s.children,function(v){if(v.className==="record-index"){r=v;}});}if(r&&r.id){return u.indexOf(r.id)+1;}};isEbscoFullText=function(r){return r==="T"||r==="C"||r==="EFT"||r==="D"||r==="EB"||r==="EK"||r==="MR";};isPDF=function(r){return r==="P";};isSmartLink=function(r){return r==="SMRT"||r==="LFT";};getFullTextOptions=function(r){var s=[];if(r.some(isPDF)){s.push("has_EBSCO_PDFs");}if(r.some(isEbscoFullText)){s.push("has_EBSCO_FullText");}if(r.some(isSmartLink)){s.push("has_SmartLinks");}return s;};getResultItemPropertiesData=function(t){var r={};var s=t?t.getAttribute("data-amplitude"):null;if(s){s=JSON.parse(s);r={full_text:getFullTextOptions(s.formats),database:s.database,document_type:s.document_type,doi:s.doi,formats:s.formats,issn:s.bkinfo.issn.length>0?s.bkinfo.issn:s.jinfo.issn.length>0?s.jinfo.issn:null,isbn:s.bkinfo.isbn.length>0?s.bkinfo.isbn:s.jinfo.isbn.length>0?s.jinfo.isbn:null,lexile_score:s.lexile_score,mid:s.mid||null,pub_type:s.pub_type,pub_year:s.pub_year,publisher:s.publisher,record_an:s.record_an,relevancy_rank:s.relevancy_rank,result_index:s.result_index,source:s.source,subjects:s.subjects,title:s.title};}r.page_index=getPageIndex(document.querySelectorAll(".results-bottom-nav .results-paging li"));if(t){r.row_index=getRowIndex(t.closest(".result-list-li"));}r.search_term=getSearchTerms();return r;};setResultItemProperties=function(r){if(r){return{database:r.database||null,document_type:r.document_type||null,doi:r.doi||null,formats:r.formats||null,full_text:r.full_text||null,issn:r.issn!==null?r.issn.map(function(s){return parseInt(s,10);}):null,isbn:r.isbn!==null?r.isbn.map(function(s){return parseInt(s,10);}):null,lexile_score:parseInt(r.lexile_score,10)||null,mid:r.mid||null,page_index:parseInt(r.page_index,10)||null,pub_type:r.pub_type||null,pub_year:parseInt(r.pub_year,10)||null,publisher:r.publisher||null,record_an:r.record_an||null,relevancy_rank:parseInt(r.relevancy_rank,10)||null,result_index:parseInt(r.result_index,10)||null,row_index:parseInt(r.row_index,10)||null,search_term:r.search_term||null,source:r.source||null,subjects:r.subjects.length>0?r.subjects:null,title:r.title||null};}};getFirstParentElementOfType=function(s,u){if(!u){return null;}var r=s.parentElement;var t=u.toUpperCase();while(r){if(r.tagName&&r.tagName.toUpperCase()===t){return r;}r=r.parentElement;}return null;};isContainedByExactClass=function(t,v,s){var r=t.parentElement;var u=v&&v.toUpperCase();while(r){if(r.tagName&&(u?r.tagName.toUpperCase()===u:true)&&r.classList&&r.classList.contains(s)){return r;}r=r.parentElement;}return null;};isContainedById=function(s,v,t){var r=s.parentElement;var u=v&&v.toUpperCase();while(r){if(r.tagName&&(u?r.tagName.toUpperCase()===u:true)&&r.id===t){return r;}r=r.parentElement;}return null;};getHeadersInChildren=function(r){var s=r.filter(function(u){return(u.tagName&&(u.tagName.toUpperCase()==="H1"||u.tagName.toUpperCase()==="H2"||u.tagName.toUpperCase()==="H3"));}).map(function(t){return t.innerText;}).join("-");return s;};recurseUpAndGetHeader=function(t){var r=t;while(r){var s=Array.prototype.slice.call(r.childNodes);var u=this.getHeadersInChildren(s);if(u){return u;}r=r.parentElement;}return null;};getPidProperties=function(){var r=window.ep.clientData.pid;var s=r.split(".");return{custId:s[0],groupId:s[1],profileId:s[2]};};setCookie=function(r,s){if(r!=null&&s!=null){document.cookie=r+"="+s;}};getCookie=function(r){var t="; "+document.cookie;var s=t.split("; "+r+"=");if(s.length===2){return s.pop().split(";").shift();}};getValueFromString=function(r,t){var u="&"+t;var s=u.split("&"+r+"=");if(s.length===2){return s.pop().split("&").shift();}};getPath=function(){try{return window.location.pathname;}catch(r){return null;}};getInterfaceId=function(){try{return ep.interfaceId;}catch(r){return null;}};getAppPath=function(){try{return window.location.pathname.split("/").slice(2).join("_");}catch(r){return null;}};getCommonProperties=function(r){return{target:r.target,path:window.location.path,tag:r.target.tagName,id:r.target.id,cssClass:r.target.className,innerText:r.target.innerText.trim()};};getDirectLabel=function(r){if(r.labels&&r.labels.length>0){return(r.labels[0].innerText||"").trim();}return"";};getInputValue=function(r){switch(r.tagName.toLowerCase()){case"input":switch(r.type){case"checkbox":return r.innerText||this.getDirectLabel(r);case"radio":return r.innerText||this.getDirectLabel(r);default:return r.value;}case"option":return"not implemented: option";case"select":return Array.prototype.slice.call(r.querySelectorAll("option:checked")).map(function(s){return s.innerText.trim();}).join(",");default:return"undefined";}};getMobileRefineResultsSection=function(r,s){if(window.location.pathname.indexOf("/Results/RefinePanel")>-1){s.container="Refine Results Section";if(r.type&&r.type.toLowerCase()==="checkbox"){s.object="Filter";var t=r.parentElement&&r.parentElement.querySelector("label");var u=document.querySelector("legend");if(t){var v=t.innerText;if(v.indexOf("(")>-1){v=v.substring(0,v.indexOf("("));}s.databag.label=v;}if(u){s.databag.section=u.innerText;}}}};getMobileRefineResults=function(r,s){if(window.location.pathname.indexOf("/Results/Refine")>-1){s.container="Refine Results";if(r.parentElement&&r.parentElement.tagName.toUpperCase()==="H3"){s.object="Filter Section";s.databag.section=r.parentElement.innerText;s.action="selected";}}};getMobileToolbar=function(r,s){getNameFromClassList=function(u){if(!u.classList){return;}for(var v=0;v<u.classList.length;v++){if(u.classList[v]!=="icon-tool"){return u.classList[v];}}return null;};if(r.classList&&r.classList.contains("icon-tool")){s.container="Toolbar (mobile)";s.action="clicked";s.object=getNameFromClassList(r)||"toolbar item";return;}var t=this.isContainedByExactClass(r,"A","icon-tool");if(t){s.container="Toolbar (mobile)";s.action="clicked";s.object=getNameFromClassList(t)||"toolbar item";}};getEhostSeachModifierName=function(r,s){if(this.recurseUpAndGetHeader(r)==="Refine Results"){s.container="Refine Results";if(r.classList&&r.classList.contains("rl-lim-heading")){s.object="Section";s.databag.section=r.innerText;s.action=r.classList.contains("active")?"expanded":"contracted";}if(r.classList&&r.classList.contains("caret")){if(r.parentElement&&r.parentElement.tagName.toUpperCase()==="A"){s.object="Section";s.databag.section=r.parentElement.innerText;s.action=r.parentElement.classList.contains("active")?"expanded":"contracted";}}if(r.classList&&(r.classList.contains("filterDateTo")||r.classList.contains("filterDateFrom"))){s.object="Date Range";s.action="set";}}};getDidYouMean=function(r,s){if(r.id==="btnSuggestTerm"){s.container="Search";s.object="Did You Mean";s.databag.text=r.innerText;}};getResultItem=function(r,s){if(r.tagName.toUpperCase()==="DIV"&&r.className.indexOf("result-list-record")!==-1){s.container="Result Item";s.databag.text=r.innerText;}};containerFallback=function(r,s){if(s.container){return;}if(this.isContainedByExactClass(r,null,"browse-alpha")){s.container="Alphabetical Selector";return;}if(this.isContainedByExactClass(r,null,"find-field-controls")){s.container="Find Field Controls";return;}if(this.isContainedByExactClass(r,null,"result-list-li")){s.container="Result Item";return;}if(this.isContainedByExactClass(r,null,"citation-content")){s.container="Citation Content";return;}};getResearchStarterItem=function(r,s){if(r.tagName.toUpperCase()==="DIV"&&r.className.indexOf("placard-content-container")!==-1){s.container="Research Starter";}};getPlacardTitleLink=function(r,s){if(r.tagName.toUpperCase()==="H3"&&r.className.indexOf("placard-title")>-1){s.object="Placard Title Link";if(s.container==="placard-content-container"){s.value=r.innerText;}}};getSubmenuLink=function(r,s){if(r.classList&&r.classList.contains("submenu-link")){var t=isContainedByExactClass(r,"li","submenu-trigger");var u=t.querySelector("a");if(u){s.container=u.innerText&&u.innerText.trim();}s.object="Menu Item";s.action="clicked";s.databag.text=r.innerText&&r.innerText.trim();}};getRelatedLink=function(r,s){if(r.tagName.toUpperCase()==="P"&&r.className.indexOf("placard-related")!==-1){s.object="Other Topics";s.databag=null;}};getContentHeader=function(r,s){if(r.className.indexOf("content-header")!==-1){s.container="Content Header";}};getSearchWrapper=function(r,s){if(r.id==="findFieldOuter"){s.container="Search Section";}};getHelpLink=function(r,s){if(r.id==="helpLink"){s.object="Help Link";}};getCitationField=function(s,t){var r=this.isContainedById(s,null,"citationFields");if(r){t.container="Detail Citation";var u;switch(r.tagName.toUpperCase()){case"DL":u=getFirstParentElementOfType(s,"dd");break;case"DIV":u=getFirstParentElementOfType(s,"span");break;}if(u){t.object=u.previousElementSibling&&u.previousElementSibling.innerText;t.action="clicked";t.databag.citation_value=s.innerText.trim();}}};getRecommendations=function(r,s){var u=this.isContainedById(r,null,"RecommendationsWrapper");if(u){var t=r.querySelector("h2");s.container=t?t.innerText:"Recommendations";s.object="Selection";s.action="clicked";s.databag.selected=r.innerText;}};getFolderHasItems=function(r,s){var u=this.isContainedById(r,null,"folderItemsContainerControl");if(u){var t=r.querySelector("h2");s.container=t?t.innerText:"Folder Items";s.object="Item";s.action="clicked";s.databag.selected=r.innerText;}};getAudioBookCitationDetails=function(s,t){var r=this.getFirstParentElementOfType(s,"div");if(r&&r.className==="audiobook-details"){t.container="Audiobook Detail";switch(s.tagName.toUpperCase()){case"BUTTON":case"SPAN":case"A":t.object=s.innerText;break;default:t.object="affordance";}}};getModuleSection=function(r,s){var u=isContainedByExactClass(r,"div","module");if(u){var t=u.querySelector("h2");if(!t){return;}s.container=t.innerText;if(r.className){if(r.className.indexOf("title")>-1){s.object="Title Link";}else{if(r.className.indexOf("author")>-1){s.object="Author Link";}else{s.object=r.innerText;}}}else{s.object=r.innerText;}return;}var v=isContainedByExactClass(r,null,"module-content");if(v){s.container="Module Content";var t=this.parentElement&&this.parentElement.querySelector(".module-header");if(t){s.databag.module_header=t.innerText;}s.object=r.classList&&r.classList.join("_");}};getBrowsePublication=function(r,s){if(this.isContainedById(r,"div","modal")){return;}if(document.location.pathname.slice(-11)==="publication"&&document.querySelector("#content .publications-title")&&document.querySelector("#content .publications-title").innerText.indexOf("Publications")===0){s.container="Publications List";s.action="clicked";if(r.id.indexOf("RSS")>-1){s.object="Alert Icon";}else{if(r.id.indexOf("link")===0){s.object="Text Link";}else{if(r.type&&r.type.toLowerCase()==="checkbox"){s.object="Checkbox";}else{s.object="Element";}}}}};getFilteredPublications=function(r,s){if(document.location.pathname.indexOf("filteredpublication")===-1){return;}if(!this.isContainedById(r,"div","mainContentArea")){return;}s.container="Filtered Publications";if(r.classList&&r.classList.contains("auth-record-link")){s.object="Publication Link";s.databag.publication_name=r.innerText;return;}if(this.isContainedByExactClass(r,"div","hjaf-list-items")){s.object="Publisher Link";s.databag.tab_label=r.innerText;return;}if(this.isContainedByExactClass(r,"div","tabs")){s.object="Tab";s.databag.tab_label=r.innerText;return;}if(this.isContainedByExactClass(r,"div","browse-by-type")){s.object="Publication Type Selector";s.databag.publication_type=r.innerText;return;}};getPreferenceDialog=function(r,s){if(r.id==="preferencesDialog"){s.container="Preferences Dialog";}};getChooseDatabaseListItem=function(r,s){if(r.id&&r.id.slice(0,19)==="ctrlSelectDb_dbList"){s.container="Choose Databases";s.object="database";}else{if(r.id&&r.id==="selectAllDbs"){s.container="Choose Databases";}}};getBrowseIndexes=function(r,s){switch(r.id){case"ctl00_ctl00_MainContentArea_MainContentArea_btnBrowse":s.container="Browse Indexes";s.object="Submit Button";break;case"ctl00_ctl00_MainContentArea_MainContentArea_indexBrowseControl_txtBrowse":s.container="Index List";s.object="Browse For";break;case"ctl00_ctl00_MainContentArea_MainContentArea_listIndexes":s.container="Browse Indexes";s.object="Index List";break;default:if(r.parentElement&&r.parentElement.className&&r.parentElement.className.indexOf("index_browse_row")>-1){s.container="Browse Indexes";s.object="Term List";}break;}};getPDFArticleToolsPanel=function(r,s){if(r.parentElement&&r.parentElement.className&&r.parentElement.className.indexOf("article-tool")>-1&&r.tagName.toUpperCase()==="A"){s.container="Article Tools";s.object="tool";s.databag.tool_name=r.title||"unknown";}};getPublicationDetails=function(r,s){if(r.className&&r.className.indexOf("authVolIssue_volume_cell")>-1){s.container="Publication Details";s.object="Volume Expander";}else{if(r.className&&r.className.indexOf("authVolIssue_issue_cell")>-1){s.container="Publication Details";s.object="Issue Selector";}else{if(document.querySelector(".authdetailbg .content-header .publications-title")&&document.querySelector(".authdetailbg .content-header .publications-title").innerText.indexOf("Publications")===0){s.container="Publication Details";if(r.title&&r.title.indexOf("Expand")>-1){s.object="Expander";s.databag.title=r.title;}else{s.object=r.id||"affordance";}}else{if(window.location.pathname.indexOf("/command/detail")>-1){s.container="Publication Details";if(this.isContainedByExactClass(r,"td","rec-cell-right")){var t=getFirstParentElementOfType(document.getElementById("link_fulltext_1"),"TR");s.object=t&&t.querySelector(".rec-cell-left").innerText;}}}}}};getAPVideo=function(r,s){if(r.id==="apvideo"){s.container="AP Video";s.object="video";s.action="clicked";}};getPageOptions=function(r,s){if(r.id==="lnkPageOptions"){s.container="Result List Content Options";s.object="Page Options";s.action="clicked";return;}else{if(r.id==="lnkSortOptions"){s.container="Result List Content Options";s.object="Relevence Options";s.action="clicked";return;}}var t=this.isContainedById(r,"ul","pageOptions");if(t){var u=recurseUpAndGetHeader(r.parentElement);s.object=u?u:"affordance";s.container="Page Options";s.databag.text=r.innerText;s.action="clicked";}};getEbookTOC=function(s,t){var r=this.getFirstParentElementOfType(s,"div");if(r&&r.id&&r.id.indexOf("ebooksTOC")===0){t.container="EBook TOC";t.object="Section";t.action="clicked";}};getEbookToolbar=function(r,s){if(r.tagName.toUpperCase()==="SECTION"&&r.getAttribute("aria-label")==="Ebook Toolbar"){s.container="EBook Viewer";}};getCloseContentHeaderModal=function(r,s){if(r.className==="close-panel"){s.object="Close Panel";s.container=r.parentElement&&r.parentElement.querySelector("h2")&&r.parentElement.querySelector("h2").innerText;}};getIsInFolder=function(r,s){if(this.isContainedById(r,"div","modal")){return;}if(document.location.pathname.indexOf("folder")>-1){s.container="Folder";}};getHtmlFtToc=function(s,t){var r=this.getFirstParentElementOfType(s,"div");if(r&&r.className==="html-ft-toc"){t.container="HTML Fulltext TOC";t.object="Section Link";t.action="clicked";}};getPager=function(r,s){var t=this.isContainedByExactClass(r,"ul","results-paging");if(t){s.object="Pager";s.action="paged";s.databag.paged_to=r.innerText;return;}};getLetterNavigation=function(r,s){var t=this.isContainedByExactClass(r,"ul","LetterNavigation");if(t){s.object="Letter Navigation";s.action="clicked";s.databag.letter=r.innerText.trim();}};getCompanyInfoResults=function(r,s){if(this.isContainedById(r,"div","modal")){return;}if(document.location.pathname.indexOf("/companyinforesults")>-1){s.container="Company Information Results";var t=this.isContainedByExactClass(r,"tr","table-header");if(t){s.object="Header Control";s.action=r.tagName.toUpperCase()==="A"?"sorted":"selected_all";s.databag.value=r.tagName.toUpperCase()==="A"?r.innerText:"All";return;}var t=this.isContainedById(r,"table","companyResults");if(t){s.object="Company";s.action=r.tagName.toUpperCase()==="A"?"link_selected":"checkbox_selected";return;}}};getCompanyInfo=function(r,s){if(r.id==="companyResults"){s.container="Company Information";}};getCompanyData=function(r,s){var t=this.getFirstParentElementOfType(r,"section");if(t&&t.id==="companyData"){s.container="Company Data";s.object=r.title||"Link";s.action="clicked";}};getRelatedInfo=function(r,s){if(r.id&&r.id.indexOf("relatedInfo")>-1){if(r.tagName&&r.tagName.toUpperCase()==="A"){s.databag.text=r.innerText;s.object="Related Info Link";}}};getTitleLink=function(r,s){if(r.className&&r.classList.contains("title-link-wrapper")){s.object="Title Link";s.databag.text=r.innerText;}};getThesaurus=function(r,s){if(document.title&&document.title.indexOf("Thesaurus")===0){s.container="Thesaurus";var t=document.querySelector("#ctl00_ctl00_MainContentArea_MainContentArea_authDbNameLabel");if(!t){return;}s.databag.browsing=t.innerHTML&&t.innerHTML.trim();}};getDbTitleLink=function(r,s){if(r.classList&&r.classList.contains("db-title-link")){s.container="Database Selection";s.object="Title Link";s.action="clicked";s.databag.title=r.innerText;}else{if(r.classList&&r.classList.contains("db-check")){s.container="Database Selection";s.object="Checkbox";s.action="selected";s.databag.title=r.title?r.title:"unknown";}}};getMobileResult=function(r,s){var u=this.isContainedByExactClass(r,"div","record-info");if(u){s.container="Result Item";var t=this.getFirstParentElementOfType(r,"h2");if(t&&t.classList&&t.classList.contains("record-title")){s.object="Title Link";}else{if(r.classList){if(r.classList.contains("add-to-folder")){s.object="Add To Folder";}}}}};getMobileDocTypeLink=function(r,s){if(r.classList&&r.classList.contains("record-type")){if(r.classList.contains("pdf-ft")){s.object="PDF FullText Link";}else{if(r.classList.contains("html-ft")){s.object="HTML FullText Link";}else{if(r.classList.contains("abook")){s.object="Audio Book Checkout";}}}}};getGenericKnownObjects=function(r,s){if(r.classList){if(r.classList.contains("arrow-left")){s.object="Left Arrow";}if(r.classList.contains("arrow-right")){s.object="Right Arrow";}}};getDigitalArchive=function(r,s){if(s.container){return;}var t=this.isContainedByExactClass(r,"div","collapse-content");if(t){s.container="Collapsible Section";s.object=s.object||t.id+" section";s.action="option selected";}};getCompanyProfile=function(r,s){var t=this.isContainedById(r,"div","companyProfiles");if(t){s.container="Company Profiles";if(isContainedByExactClass(r,"th","company")){s.object="Company Link";s.databag.company=r.innerText;}if(isContainedByExactClass(r,"td","pdf-report")){s.object="PDF Link";s.databag.company=r.innerText;}}};getCompanySearchLink=function(r,s){if(isContainedById(r,"div","companySearchLink")){s.container="Company Profile";s.object="Search Link";s.databag.source=r.innerText;s.action="clicked";}};getFlatBrowse=function(r,s){if(this.isContainedById(r,"div","modal")){return;}if(document.location.pathname.indexOf("/flatbrowse")>-1){var t=document.querySelector("#ctl00_ctl00_FindField_FindField_DatabaseNameLabel");s.container=t?t.innerText:null;if(!r.type){return;}switch(r.type.toLowerCase()){case"radio":s.object="Options";break;case"text":s.object="Text Field";break;case"checkbox":s.object="Checkbox Option";if(r.id){var u=r.id.indexOf("_");var v=r.id.substr(0,u)+"_val"+r.id.substr(u);if(document.querySelector('input[name="'+v+'"]')){s.databag.check_val=document.querySelector('input[name="'+v+'"]').value;}}break;}}};getDictionary=function(r,s){if(this.isContainedById(r,"div","modal")){return;}if(document.location.pathname.indexOf("/dictionary")>-1){var t=isContainedById(r,"div","ctl00_ctl00_MainContentArea_MainContentArea_PnlTerms");s.container="Dictionary";if(t){if(r.tagName&&r.tagName.toUpperCase()==="A"){s.object="Word Link";s.databag.word=r.innerText&&r.innerText.trim();}}else{if(r.title){if(r.title.indexOf("Previous")>-1){s.object="Previous Button";}else{if(r.title.indexOf("Next")>-1){s.object="Next Button";}}}}}};getRelatedInfoWidget=function(r,s){var v=this.isContainedByExactClass(r,"div","related-info-area");if(v){var u=v.querySelector("h3");s.container=u?u.innerText:"Related Widget";var t=this.isContainedByExactClass(r,"h3","collapse-toggle");if(t){s.object="Expander";s.action=t.classList.contains("active")?"collapsed":"expanded";}else{s.object=r.classList&&r.classList.join("_");}}};getClassifications=function(s,t){if(this.isContainedById(s,"div","modal")){return;}if(document.location.pathname.indexOf("/classification")>-1){var u=document.querySelector("#ctl00_ctl00_FindField_FindField_databaseTitle_databaseName");var r=this.isContainedByExactClass(s,"table","authority-record-classification");t.databag.page_type="classification";if(u){t.container=u.innerText&&u.innerText.trim();}else{t.container="Classification";}if(s.title&&s.title.indexOf("Expand")>-1){t.object="Expander";}else{if(r){t.object="Link To Classification";t.databag.classification=s.innerText&&s.innerText.trim();}}}};getCitedReferences=function(r,s){if(this.isContainedById(r,"div","modal")){return;}if(window.location.pathname.indexOf("/refresults")>-1){s.container="Cited References";}};getSnippet=function(r,s){if(r.classList&&r.classList.contains("snippet-link")){s.object="Snippet Link";}};getGoogleBookPreview=function(s,t){var r=this.isContainedByExactClass(s,"a","gbp_button");if(r){t.object="Google Book Preview";}};videosLoaded=function(r){if(r){createVideosFetchedEvent(r);createVideosShownEvent(r);}};getVideoAffordances=function(v,t){var u={sectionHeading:v.panelHeader?"Video Section Heading":null,countOfVideoResults:v.totalHits?"Count Of Video Results":null,viewAllLink:v.viewAllLabel?"View All Videos Link":null,title:v.results[t].title?"Video Title":null,videoThumbnail:v.results[t].thumbnail?"Video Thumbnail Image":null,tooltipTitle:v.results[t].title?"Tooltip Video Title":null,tooltipModalButton:"Video Tooltip Modal Button",tooltipModalCloseButton:"Video Tooltip Modal Close Button"};var s=[];for(var r in u){if(u[r]){s.push(u[r]);}}return s;};videoAffordanceReducer=function(r){switch(r){case"panel__thumbnail-tooltip":return"Tooltip Modal Button";case"panel__thumbnail-modal-link":return"Tooltip Video Title";case"panel__thumbnail-title-link":return"Video Title";case"panel__thumbnail-link":return"Video Thumbnail Image";case"panel__heading":return"Video Section Heading";case"panel__view-all-link":return"View All Videos Link";case"panel__thumbnail-modal-close-btn":return"Video Modal Close Button";default:return null;}};getVideoAffordanceUsed=function(r){if(r.classList.length>0){return videoAffordanceReducer(r.classList[0]);}else{if(r.parentElement.classList.length>0&&r.parentElement.className){return videoAffordanceReducer(r.parentElement.className);}else{if(r.tagName.toUpperCase()==="PATH"){if(r.closest(".panel__thumbnail-modal-close-btn")){return"Video Modal Close Button";}}}}};getCommonVideoProperties=function(r){return{record_an:r.an||null,duration:r.durationInMilliseconds||null,published:r.publicationDate||null,source:r.publisher||null,subjects:r.keywords||[],title:r.title||null,longDbName:r.longDbName||null};};createVideosFetchedEvent=function(t){if(window.location.href.indexOf("/results?")<0&&window.location.href.indexOf("/resultsadvanced?")<0){return null;}var s={};s.action="video_panel_fetched";s.container="Results Section";var r={};r.event_type="video_panel_fetched";r.total_hits=t.totalHits;r.search_term=getSearchTerms();r.count_of_results_shown=t.results.length;this.logEvent(s,r);return null;};createVideosShownEvent=function(t){if(!isOnResultsPage()){return null;}var s={};s.action="video_panel_shown";s.container="Results Section";var r={};r.event_type="video_panel_shown";if(!t.results.length){r.error="Video panel not found";this.logEvent(s,r);throw"Video panel not found";}t.results.forEach(function(v,u){r=getCommonVideoProperties(v);r.affordances_shown=getVideoAffordances(t,u);r.search_term=getSearchTerms();r.database=ep.clientData.db;this.logEvent(s,r);});return null;};createVideoClickedEvent=function(s,w){if(!isOnResultsPage()){return null;}var v={};v.action="video_panel_clicked";v.container="Results Section";var r={};r.event_type="video_panel_clicked";var t=$(s.target).parents(".panel__frame")[0];if(t){var u=t.getAttribute("data-result-index");if(u){u=parseInt(u)-1;r=getCommonVideoProperties(w.results[u]);}}r.search_term=getSearchTerms();r.affordance_clicked={name:getVideoAffordanceUsed(s.target),link:(function(x){return x.target.tagName.toUpperCase()==="A"?x.target.href:x.target.parentElement.tagName.toUpperCase()==="A"?x.target.parentElement.href:null;})(s)};r.is_context_menu_open=w.is_context_menu_open?"true":"false";r.db=ep.clientData.db;this.logEvent(v,r);return null;};getResultItemChildren=function(r,s){if(r.parentElement&&r.parentElement.tagName.toUpperCase()==="SPAN"){var t=r.parentElement.previousElementSibling;if(t&&t.tagName.toUpperCase()==="SPAN"){switch(t.innerText.toLowerCase()){case"by":s.object="Author Link";break;case"series":s.object="Series Link";}}}};getEHostKnownObjectName=function(s){var r=s.target;var t={container:null,object:null,action:null,databag:{}};var u=[this.getModuleSection.bind(this),this.getAudioBookCitationDetails.bind(this),this.getEhostSeachModifierName.bind(this),this.getPageOptions.bind(this),this.getDbTitleLink.bind(this),this.getMobileResult.bind(this),this.getMobileDocTypeLink.bind(this),this.getMobileRefineResultsSection.bind(this),this.getMobileRefineResults.bind(this),this.getSubmenuLink.bind(this),this.getDidYouMean.bind(this),this.getCitationField.bind(this),this.getBrowsePublication.bind(this),this.getBrowseIndexes.bind(this),this.getPDFArticleToolsPanel.bind(this),this.getPublicationDetails.bind(this),this.getAPVideo.bind(this),this.getCloseContentHeaderModal.bind(this),this.getHtmlFtToc.bind(this),this.getEbookTOC.bind(this),this.getCompanyData.bind(this),this.getGenericKnownObjects.bind(this),this.getCompanySearchLink.bind(this),this.getFlatBrowse.bind(this),this.getRelatedInfoWidget.bind(this),this.getDictionary.bind(this),this.getFilteredPublications.bind(this),this.getFolderHasItems.bind(this),this.getRecommendations.bind(this)];chainWhile=function(v,w,x){var y=0;var z=x.length;while(!w.container&&!w.object&&y<z){x[y](v,w);y++;}};while(r){this.chainWhile(r,t,u);this.getGoogleBookPreview(r,t);if(t.container&&t.object){return t;}this.getCompanyInfoResults(r,t);this.getResultItem(r,t);this.getResearchStarterItem(r,t);this.getContentHeader(r,t);this.getHelpLink(r,t);this.getThesaurus(r,t);this.getPlacardTitleLink(r,t);this.getRelatedLink(r,t);this.getPreferenceDialog(r,t);this.getChooseDatabaseListItem(r,t);this.getIsInFolder(r,t);this.getCompanyInfo(r,t);this.getEbookToolbar(r,t);this.getCompanyProfile(r,t);this.getSnippet(r,t);this.getTitleLink(r,t);this.getDigitalArchive(r,t);this.getPager(r,t);this.getLetterNavigation(r,t);this.getClassifications(r,t);this.getCitedReferences(r,t);this.getRelatedInfo(r,t);this.getResultItemChildren(r,t);this.getSearchWrapper(r,t);r=r.parentElement;}return t;};getObjectName=function(s){var y="";var t=this.getEHostKnownObjectName(s);if(t&&t.container&&t.object){return t;}if(t&&t.container&&(t.container==="Result Item"||t.container==="Research Starter")){if(s.target.tagName.toUpperCase()==="A"){t.object=s.target.innerText;}}y=this.getDirectLabel(s.target);var C=s.target.type&&s.target.type.toLowerCase();if(C==="checkbox"){y="Checkbox";}if(C==="image"){y=s.target.alt||"image link";}if(C==="radio"||!y){y=s.target.name||"";}if(!t.container){var u=s.target;var v="";var B="";var w="";while(u.parentElement){var r=Array.prototype.slice.call(u.parentElement.childNodes);if(u.parentElement.tagName.toUpperCase()==="FIELDSET"){var z=r.filter(function(D){return D.tagName&&D.tagName.toUpperCase()==="LEGEND";})[0];v=z&&z.innerText?z.innerText.trim()+" "+v:"";}var A=r.filter(function(D){return D.tagName&&D.tagName.toUpperCase()==="NAV";})[0];var x=this.getHeadersInChildren(r);if(x){w=x;break;}else{if(A){B=A.id||A.className||"";break;}else{if(v){break;}}}u=u.parentElement;}if(!w&&!v&&!B){if(s.target.parentElement.firstElementChild.tagName.toUpperCase()==="STRONG"){w=s.target.parentElement.firstElementChild.innerText;}}}return{container:t.container||w||v||B||null,object:t.object||y||null,action:t.action,databag:t.databag||{}};};createClickEvent=function(t){var r=this.getCommonProperties(t);var u=this.getObjectName(t);var v={container:u&&u.container,object:(u&&u.object)||r.innerText.trim(),action:u.action||"clicked"};var s=u.databag;var w=this.getInputValue(t.target)||null;s.event_type=eventTypes.ACTION;s.tag_name=t.target.tagName&&t.target.tagName.toUpperCase();s.inner_text=t.target.innerText&&t.target.innerText.trim().substring(0,16);if(w){s.value=w;}this.logEvent(v,s);};createContextmenuEvent=function(t,r){var s={is_context_menu_open:true,target_url:t.target.href};var v={};if(r){v=r;for(var u in s){v[u]=s[u];}}if(t.target.closest(".panel")){elementClicked(t,v);}else{elementClicked(t,s);}};createKeyPressedEvent=function(s,r){createResultClickedEvent(s,r);};createTextEvent=function(s){var t=this.getObjectName(s);t.action="text_changed";var r=t.databag;r.event_type=eventTypes.ACTION;this.logEvent(t,r);};createCheckEvent=function(s){var t=this.getObjectName(s);var r=t.databag;t.action=s.target.checked?"selected":"deselected";r.value=this.getInputValue(s.target)||null;r.event_type=eventTypes.ACTION;this.logEvent(t,r);};createRadioEvent=function(s){var u=this.getInputValue(s.target);var t=this.getObjectName(s);var r=t.databag;t.action="set_to";r.event_type=eventTypes.ACTION;r.value=u;this.logEvent(t,r);};createMultiSelectEvent=function(s){var u=this.getInputValue(s.target);var t=this.getObjectName(s);var r=t.databag;t.action="selected";r.event_type=eventTypes.ACTION;r.value=u;this.logEvent(t,r);};createImgEvent=function(s){var u=s.target.alt||"undefined";var t=this.getObjectName(s);var r=t.databag;t.action="clicked";t.object=t.object?t.object+" image":"image";r.event_type=eventTypes.ACTION;r.value=u;this.logEvent(t,r);};createSubmitEvent=function(s){var t={};t.action="submitted";t.object="Search Form";var r={};r.event_type=eventTypes.ACTION;this.logEvent(t,r);};logEvent=function(t,r){var s=t.container?t.container.trim():t.object||"";s+=(s=="")?"":" - ";s+=t.action;r.path=this.getPath();r.app_path=this.getAppPath();r.object=t.object;r.time_to_content_load=window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart;amplitude.getInstance().logEvent(s,r);};setProperties=function(){setUserProperties();setUserGroups();setDeviceId();};setUserProperties=function(){var s=new amplitude.Identify();s.set("locale",window.ep.clientData.locale);var t=getInterfaceId();if(t){s.set("interface_id",t);}var v=getPidProperties();if(v){s.set("profile_id",v.profileId);}var r=window.ep.clientData.auth_type;if(r){s.set("auth_type",r);}var u=window.ep.clientData.is_personalized;if(u!==null){s.set("is_personalized",u);}if(ep.palTestCaseId!==null&&ep.palTestCaseId!==""){s.set("testcase_id",ep.palTestCaseId);}amplitude.getInstance().identify(s);};setUserGroups=function(){var r=getPidProperties();if(!r){return;}amplitude.getInstance().setGroup("cust_id",r.custId);amplitude.getInstance().setGroup("group_id",r.groupId);};setDeviceId=function(){var r=ep.clientData.deviceId;if(r){amplitude.getInstance().setDeviceId(r);}};isDefaultSelected=function(r){return[].some.call(r.querySelectorAll("option"),function(s){return s.selected&&!s.value;});};getFilters=function(){var r=[];[].forEach.call(document.querySelectorAll('#aspnetForm input[name^="common"],#aspnetForm select[name^="common"],#aspnetForm input[name^="database"],#aspnetForm select[name^="database"],#resultsLimiterContent input[name^="common"]'),function(s){var t=false;switch(s.tagName.toLowerCase()){case"input":switch(s.type.toLowerCase()){case"checkbox":case"radio":t=s.checked;break;case"text":case"textarea":t=!!s.value;break;}break;case"select":t=!isDefaultSelected(s);}if(t&&s.name){r.push(s.name.replace(/^(common|database)_/gi,""));}});return r;};return{contextmenuOpened:contextmenuOpened,elementChanged:elementChanged,elementClicked:elementClicked,elementMouseOver:elementMouseOver,logEvent:logEvent,keyPressed:keyPressed,setProperties:setProperties,submitted:submitted,videosLoaded:videosLoaded,windowLoaded:windowLoaded,withLogging:setLogging};}catch(c){throw c;}})();document.addEventListener("click",wrapErrors(an.elementClicked));document.addEventListener("change",wrapErrors(an.elementChanged));document.addEventListener("contextmenu",wrapErrors(an.contextmenuOpened));document.addEventListener("mouseover",wrapErrors(an.elementMouseOver));document.addEventListener("keydown",wrapErrors(an.keyPressed));document.addEventListener("submit",wrapErrors(an.submitted));window.addEventListener("load",wrapErrors(an.windowLoaded));var searchInitiators=document.querySelectorAll("input#SearchButton, .btnset-footer>input[type=submit], #btnSuggestTerm, .folder-link");if(searchInitiators.length){for(var i=0;i<searchInitiators.length;i++){searchInitiators[i].addEventListener("click",wrapErrors(an.elementClicked));}}var listenToolPlaceholder=document.querySelector("#textToSpeechPlaceholder");if((window.location.href.indexOf("/detail?")<0||window.location.href.indexOf("/pdfviewer?")<0)&&listenToolPlaceholder){var counter=0;var numberOfAttemptsToStop=50;var listenToolLoadingChecker=setInterval(function(){var a=listenToolPlaceholder.querySelector(".rsbtn_exp");if(a){a.querySelector(".rsbtn_pause").addEventListener("click",wrapErrors(an.elementClicked));a.querySelector(".rsbtn_stop").addEventListener("click",wrapErrors(an.elementClicked));}if(a||counter===numberOfAttemptsToStop){clearInterval(listenToolLoadingChecker);}counter++;},100);}an.setProperties();}catch(e){throw e;}